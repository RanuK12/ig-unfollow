<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram Unfollow Bookmarklet Setup</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .wrapper {
            max-width: 1200px;
            margin: 0 auto;
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .tab-btn {
            padding: 12px 24px;
            background: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        .tab-btn.active {
            background: #667eea;
            color: white;
        }
        .tab-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        h1 {
            color: white;
            margin-bottom: 30px;
            text-align: center;
            font-size: 2.5em;
        }
        h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.5em;
        }
        h3 {
            color: #667eea;
            margin: 20px 0 10px;
            font-size: 1.1em;
        }
        p, li {
            color: #555;
            line-height: 1.8;
            margin-bottom: 10px;
        }
        ol, ul {
            margin-left: 25px;
            margin-bottom: 15px;
        }
        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 11px;
            line-height: 1.5;
            word-break: break-all;
        }
        .warning {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            color: #721c24;
        }
        .copy-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 10px;
            transition: all 0.3s;
        }
        .copy-btn:hover {
            background: #764ba2;
        }
        .step {
            margin: 20px 0;
            padding: 15px;
            background: #f9f9f9;
            border-left: 4px solid #667eea;
            border-radius: 4px;
        }
        .step-num {
            display: inline-block;
            width: 32px;
            height: 32px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 32px;
            font-weight: 700;
            margin-right: 10px;
        }
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <h1>üì± Instagram Unfollow Bookmarklet</h1>
        
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab(event, 'english')">üìñ English</button>
            <button class="tab-btn" onclick="switchTab(event, 'spanish')">üìñ Espa√±ol</button>
        </div>

        <!-- ENGLISH TAB -->
        <div id="english" class="tab-content active">
            <div class="card">
                <h2>‚ö†Ô∏è Important Notice</h2>
                <div class="warning">
                    This tool automates unfollowing on Instagram. Using automation violates Instagram's Terms of Service. You may face temporary action blocks, permanent account restrictions, or even account suspension. Use at your own risk. The author is not responsible for account penalties.
                </div>

                <h2>üéØ What This Does</h2>
                <p>This bookmarklet:</p>
                <ul>
                    <li>‚úÖ Scans all users you follow on Instagram</li>
                    <li>‚úÖ Shows you a list of users who don't follow you back</li>
                    <li>‚úÖ Lets you select them manually</li>
                    <li>‚úÖ Unfollows them with automatic safety delays (4-6 seconds between actions, 30-second pause every 5 unfollows)</li>
                    <li>‚úÖ <strong>NOW OPTIMIZED</strong>: Virtual scrolling for 1000+ users, lazy-loading images, instant clicks</li>
                </ul>

                <h2>üìã Step-by-Step Guide</h2>

                <div class="step">
                    <span class="step-num">1</span>
                    <strong>Copy the bookmarklet code below</strong>
                    <div class="code-block" id="codeEn">javascript:(async()=>{const d={unfollow:[4e3,6e3],pause:3e4},U={getCookie:e=>{const t='; '+document.cookie,o=t.split('; '+e+'=');return 2===o.length?o.pop().split(';').shift():null},getUserID:()=>U.getCookie('ds_user_id'),getCSRFToken:()=>U.getCookie('csrftoken'),sleep:e=>new Promise(t=>setTimeout(t,e)),randomDelay:(e,t)=>Math.floor(Math.random()*(t-e)+e)},A={async fetchFollowing(e=null){const t=U.getUserID();if(!t)throw new Error('Not authenticated');const o={id:t,include_reel:!0,fetch_mutual:!1,first:50};e&&(o.after=e);const r=await fetch('https://www.instagram.com/graphql/query/?query_hash=3dec7e2c57367ef3da3d987d89f9dbc8&variables='+JSON.stringify(o),{credentials:'include'});if(!r.ok)throw new Error('HTTP '+r.status);const i=await r.json();if(i.errors)throw new Error(i.errors[0]?.message||'API error');return i.data.user.edge_follow},async unfollow(e){const t=U.getCSRFToken();if(!t)throw new Error('No CSRF token');const o=await fetch('https://www.instagram.com/web/friendships/'+e+'/unfollow/',{method:'POST',headers:{'X-CSRFToken':t,'Content-Type':'application/x-www-form-urlencoded'},credentials:'include'});if(!o.ok)throw new Error('HTTP '+o.status);return await o.json()}};let aU=[],sU=new Set,sT=null,cNF=[];const r=document.createElement('div');r.style.cssText='position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.95);display:flex;align-items:center;justify-content:center;z-index:99999;font-family:system-ui,sans-serif;';document.body.appendChild(r);const b=document.createElement('div');b.style.cssText='background:white;border-radius:12px;width:90%;max-width:700px;max-height:85vh;display:flex;flex-direction:column;';r.appendChild(b);const h=document.createElement('div');h.style.cssText='padding:20px;border-bottom:1px solid #e0e0e0;';const tl=document.createElement('h2');tl.textContent='üì± Instagram Unfollow (Optimized)';tl.style.cssText='margin:0 0 10px;color:#333;';h.appendChild(tl);const sd=document.createElement('div');sd.textContent='Ready to scan';sd.style.cssText='text-align:center;padding:8px;background:#f0f0f0;border-radius:8px;color:#666;font-size:12px;margin-bottom:10px;';h.appendChild(sd);const pb=document.createElement('div');pb.style.cssText='width:100%;height:6px;background:#e0e0e0;border-radius:3px;margin-bottom:10px;overflow:hidden;display:none;';const pf=document.createElement('div');pf.style.cssText='height:100%;background:#667eea;width:0%;';pb.appendChild(pf);h.appendChild(pb);const bc=document.createElement('div');bc.style.cssText='display:flex;gap:10px;flex-wrap:wrap;';const sb=document.createElement('button');sb.textContent='üîç Scan';sb.style.cssText='flex:1;min-width:100px;padding:10px;background:#667eea;color:white;border:0;border-radius:8px;font-weight:bold;cursor:pointer;';const sab=document.createElement('button');sab.textContent='‚úì All';sab.style.cssText='flex:1;min-width:80px;padding:10px;background:#667eea;color:white;border:0;border-radius:8px;font-weight:bold;cursor:pointer;display:none;';const cb=document.createElement('button');cb.textContent='‚úï Clear';cb.style.cssText='flex:1;min-width:80px;padding:10px;background:#e0e0e0;color:#333;border:0;border-radius:8px;font-weight:bold;cursor:pointer;display:none;';const clb=document.createElement('button');clb.textContent='Close';clb.style.cssText='flex:1;min-width:80px;padding:10px;background:#e0e0e0;color:#333;border:0;border-radius:8px;font-weight:bold;cursor:pointer;';clb.onclick=()=>r.remove();bc.appendChild(sb);bc.appendChild(sab);bc.appendChild(cb);bc.appendChild(clb);h.appendChild(bc);b.appendChild(h);const ul=document.createElement('div');ul.style.cssText='flex:1;overflow-y:auto;padding:0;position:relative;';b.appendChild(ul);const vc=document.createElement('div');vc.style.cssText='position:relative;';ul.appendChild(vc);const ft=document.createElement('div');ft.style.cssText='padding:15px;border-top:1px solid #e0e0e0;background:#f9f9f9;flex-shrink:0;';const ub=document.createElement('button');ub.style.cssText='width:100%;padding:12px;background:#dc3545;color:white;border:0;border-radius:8px;font-weight:bold;cursor:pointer;display:none;';ub.textContent='üöÄ Unfollow (0)';ft.appendChild(ub);b.appendChild(ft);const IH=76,VI=8;let vs=0,ve=VI;function uvs(){const e=ul.scrollTop;vs=Math.max(0,Math.floor(e/IH)-2);ve=Math.min(cNF.length,vs+VI+4);rv()}function rv(){vc.innerHTML='';vc.style.height=cNF.length*IH+'px';const e=cNF.slice(vs,ve);e.forEach((e,t)=>{const o=document.createElement('div'),i=sU.has(e.id);o.style.cssText='display:flex;align-items:center;gap:12px;padding:12px;border-bottom:1px solid #e0e0e0;cursor:pointer;background:'+(i?'#f0f7ff':'white')+';border-left:4px solid '+(i?'#667eea':'transparent')+';transition:all 0.2s;position:absolute;top:'+(vs+t)*IH+'px;width:100%;box-sizing:border-box;';o.onmouseover=()=>o.style.background=i?'#f0f7ff':'#f9f9f9';o.onmouseout=()=>o.style.background=i?'#f0f7ff':'white';const n=document.createElement('img');n.style.cssText='width:48px;height:48px;border-radius:50%;object-fit:cover;flex-shrink:0;background:#e0e0e0;';n.onload=()=>n.style.background='none';n.src=e.profile_pic_url;const s=document.createElement('div');s.style.cssText='flex:1;min-width:0;';const c=document.createElement('div');c.textContent='@'+e.username;c.style.cssText='font-weight:600;color:#333;font-size:13px;word-break:break-word;';const l=document.createElement('div');l.textContent='üî¥ Not following back';l.style.cssText='color:#dc3545;font-size:11px;margin-top:2px;';s.appendChild(c);s.appendChild(l);const u=document.createElement('input');u.type='checkbox';u.checked=i;u.style.cssText='width:18px;height:18px;flex-shrink:0;cursor:pointer;';o.onclick=t=>{t.stopPropagation();sU.has(e.id)?sU.delete(e.id):sU.add(e.id);ub.textContent='üöÄ Unfollow ('+sU.size+')';o.style.background=sU.has(e.id)?'#f0f7ff':'white';o.style.borderLeft=sU.has(e.id)?'4px solid #667eea':'4px solid transparent'};o.appendChild(n);o.appendChild(s);o.appendChild(u);vc.appendChild(o)});0===e.length&&aU.length>0&&((e=>{const t=document.createElement('div');t.textContent='‚úÖ Everyone follows you!';t.style.cssText='text-align:center;padding:20px;color:#666;';vc.appendChild(t)})(0))}ul.addEventListener('scroll',()=>{sT&&clearTimeout(sT);sT=setTimeout(uvs,50)});function rn(){cNF=aU.filter(e=>!e.follows_viewer);ve=Math.min(cNF.length,VI+4);rv()}sb.onclick=async()=>{sb.disabled=!0;let e=null;try{pb.style.display='block';const t=[];for(;;){const o=await A.fetchFollowing(e);t.push(...o.edges.map(e=>e.node));if(t.length%50==0||!o.page_info?.has_next_page){aU=t.slice();const r=Math.round(aU.length/1650*100);pf.style.width=r+'%';sd.textContent='Scanned: '+aU.length;rn();await U.sleep(10)}if(!o.page_info?.has_next_page)break;e=o.page_info.end_cursor;await U.sleep(300)}pb.style.display='none';const o=aU.filter(e=>!e.follows_viewer).length;sd.textContent='‚úÖ '+aU.length+' total ('+o+' not following back)';sb.style.display='none';sab.style.display='inline-block';cb.style.display='inline-block';ub.style.display='block'}catch(e){sd.textContent='‚ùå '+e.message;sb.disabled=!1}};sab.onclick=()=>{aU.filter(e=>!e.follows_viewer).forEach(e=>sU.add(e.id));rn();ub.textContent='üöÄ Unfollow ('+sU.size+')'};cb.onclick=()=>{sU.clear();rn();ub.textContent='üöÄ Unfollow (0)'};ub.onclick=async()=>{if(0===sU.size)return void alert('Select at least one user');if(!confirm('Unfollow '+sU.size+' users? This may take several minutes.'))return;ub.disabled=!0;pb.style.display='block';let e=0;const t=Array.from(sU),o=t.length;for(let r=0;r<t.length;r++){const i=t[r];try{await A.unfollow(i);e++}catch(e){console.log('Error:',e)}sd.textContent='Unfollowing... '+e+'/'+o;(e+1)%5==0?(sd.textContent='Unfollowing... '+e+'/'+o+' (30s pause)',await U.sleep(d.pause)):await U.sleep(U.randomDelay(d.unfollow[0],d.unfollow[1]));if(e%50==0){aU=aU.filter(e=>!sU.has(e.id));cNF=cNF.filter(e=>!sU.has(e.id))}}pb.style.display='none';sd.textContent='‚úÖ '+e+' unfollowed';ub.disabled=!1;sU.clear();aU=[];cNF=[];vc.innerHTML='';sb.style.display='inline-block';sab.style.display='none';cb.style.display='none';ub.style.display='none'}})();
